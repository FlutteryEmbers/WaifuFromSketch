(function(e){function t(t){for(var a,c,s=t[0],r=t[1],l=t[2],u=0,d=[];u<s.length;u++)c=s[u],o[c]&&d.push(o[c][0]),o[c]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);h&&h(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var r=n[s];0!==o[r]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={app:0},i=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var h=r;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Draw")],1)},i=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout"},[n("div",{staticClass:"header"},[e._m(0),n("div",{staticClass:"nav"},[e._l(e.tabs,function(t){return n("mu-flat-button",{key:t.name,staticClass:"tab demo-flat-button",attrs:{label:t.name,icon:t.icon,primary:"",backgroundColor:"#FFFFFF"},on:{click:function(n){e.tabfun(t.fun)}}})}),n("mu-flat-button",{staticClass:"tab demo-flat-button",attrs:{label:e.chooseColorBtn,icon:"color_lens",primary:"",backgroundColor:"#FFFFFF",color:e.color.hex},on:{click:function(t){e.setColor()}}}),n("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"download",attrs:{href:"javascript:void(0);",download:"picture.png"}})],2),e.ischoosecolor?n("PhotoshopPicker",{staticStyle:{position:"absolute","z-index":"10",top:"56px"},on:{ok:function(t){e.setColor()},cancel:function(t){e.falseColor()}},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}}):e._e()],1),n("div",{staticClass:"content"},[n("div",{staticClass:"content-left"},[n("div",{staticClass:"setterSize"},[n("span",[e._v("线条粗细:"+e._s(e.penSize))]),n("mu-slider",{attrs:{step:1,max:30},model:{value:e.penSize,callback:function(t){e.penSize=t},expression:"penSize"}}),n("span",[e._v("虚线长度:"+e._s(e.lineType[0]))]),n("mu-slider",{attrs:{step:1,max:100},model:{value:e.lineType[0],callback:function(t){e.$set(e.lineType,0,t)},expression:"lineType[0]"}}),n("span",[e._v("虚线间距:"+e._s(e.lineType[1]))]),n("mu-slider",{attrs:{step:1,max:100},model:{value:e.lineType[1],callback:function(t){e.$set(e.lineType,1,t)},expression:"lineType[1]"}})],1),n("mu-paper",e._l(e.tools,function(t){return n("mu-menu",{key:t.name},[n("mu-menu-item",{class:{selected:t.ischoose},attrs:{title:t.name,leftIcon:t.icon},on:{click:function(n){e.drawType(t)}}})],1)}),1)],1),n("div",{staticClass:"content-right"},[n("div",{staticClass:"body",style:{width:e.canvasSize.width+"px",height:e.canvasSize.height+"px"}},[n("canvas",{ref:"canvas",style:{cursor:e.curcursor},attrs:{id:"canvas"}}),n("canvas",{ref:"canvas_bak",style:{cursor:e.curcursor},attrs:{id:"canvas_bak"}})])])])])},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo"},[n("span",[e._v("Drawing")])])}],r=(n("6c7b"),n("c345")),l={name:"draw",data:function(){return{canvasSize:{width:window.screen.availWidth-320,height:.75*window.screen.availHeight},canvas:this.$refs.canvas,canvasTop:67,canvasLeft:300,context:null,canvas_bak:this.$refs.canvas_bak,context_bak:null,ischoosecolor:!1,toolsToggle:!1,chooseColorBtn:"选择颜色",color:{hex:"#2196f3",hsl:{h:205,s:86,l:0,a:1},hsv:{h:205,s:86,v:92,a:1},rgba:{r:33,g:150,b:243,a:1},a:1},penSize:1,lineType:[0,0],canDraw:!1,curcursor:"auto",cancelList:[],cancelIndex:0,tools:[{name:"铅笔",icon:"mode_edit",fun:"pencil",ischoose:!1},{name:"直线",icon:"remove",fun:"line",ischoose:!1},{name:"圆形",icon:"panorama_fish_eye",fun:"circle",ischoose:!1},{name:"矩形",icon:"crop_square",fun:"square",ischoose:!1},{name:"涂鸦",icon:"brush",fun:"handwriting",ischoose:!1},{name:"橡皮",icon:"border_style",fun:"rubber",ischoose:!1}],tabs:[{name:"清除",icon:"clear",fun:"clear"},{name:"保存",icon:"system_update_alt",fun:"save"}]}},methods:{initCanvas:function(){this.canvas=document.getElementById("canvas"),this.canvas.width=this.canvasSize.width,this.canvas.height=this.canvasSize.height,this.context=this.canvas.getContext("2d"),this.canvas_bak=document.getElementById("canvas_bak"),this.canvas_bak.width=this.canvasSize.width,this.canvas_bak.height=this.canvasSize.height,this.context_bak=this.canvas_bak.getContext("2d")},setColor:function(){this.chooseColorBtn=this.ischoosecolor?"选择颜色":"确认选择",this.ischoosecolor=!this.ischoosecolor},falseColor:function(){this.ischoosecolor=!1},drawType:function(e){switch(e.fun){case"pencil":this.curcursor="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAZ0lEQVR4AdXOrQ2AMBRF4bMc/zOUOSrYoYI5cQQwpAieQDW3qQBO7Xebxx8bWAk5/CASmRHzRHtB+d0Bkw0W5ZiT0SYbFcl6u/2eeJHbxIHOhWO6Er6/y9syXpMul5PLefAGKZ1/rwtTimwbWLpiCgAAAABJRU5ErkJggg==') 3 24,  auto";break;case"rubber":this.curcursor="pointer";break;case"circle":case"square":case"line":case"handwriting":this.curcursor="crosshair";break;default:this.curcursor="auto";break}this.draw_graph(e.fun),this.chooseImg(e)},chooseImg:function(e){for(var t=0;t<this.tools.length;t++)this.tools[t].ischoose=!1;e.ischoose=!0},tabfun:function(e){"clear"===e?this.clearContext("1"):"save"===e&&this.downloadImage()},draw_graph:function(e){var t,n,a=this;this.canvas_bak.style.zIndex=1,this.canDraw=!1;var o=function(o){a.context.strokeStyle=a.color.hex,a.context_bak.strokeStyle=a.color.hex,a.context_bak.lineWidth=a.penSize,o=o||window.event,t=o.clientX-a.canvasLeft,n=o.clientY-a.canvasTop,a.context_bak.moveTo(t,n),a.canDraw=!0,"pencil"==e?a.context_bak.beginPath():"circle"==e?(a.context.beginPath(),a.context.moveTo(t,n),a.context.lineTo(t+2,n+2),a.context.stroke()):"rubber"==e&&a.context.clearRect(t-10*a.penSize,n-10*a.penSize,20*a.penSize,20*a.penSize)},i=function(t){t=t||window.event,a.canDraw=!1;var n=new Image;if("rubber"!=e){n.src=a.canvas_bak.toDataURL(),n.onload=function(){a.context.drawImage(n,0,0,n.width,n.height,0,0,a.canvasSize.width,a.canvasSize.height),a.clearContext(),a.saveImageToAry()};var o=t.clientX-a.canvasLeft,i=t.clientY-a.canvasTop;a.context.beginPath(),a.context.moveTo(o,i),a.context.lineTo(o+2,i+2),a.context.stroke()}},c=function(o){o=o||window.event;var i=o.clientX-a.canvasLeft,c=o.clientY-a.canvasTop;if(a.context_bak.setLineDash(a.lineType),"square"==e)a.canDraw&&(a.context_bak.beginPath(),a.clearContext(),a.context_bak.moveTo(t,n),a.context_bak.lineTo(i,n),a.context_bak.lineTo(i,c),a.context_bak.lineTo(t,c),a.context_bak.lineTo(t,n),a.context_bak.stroke());else if("line"==e)a.canDraw&&(a.context_bak.beginPath(),a.clearContext(),a.context_bak.moveTo(t,n),a.context_bak.lineTo(i,c),a.context_bak.stroke());else if("pencil"==e)a.canDraw&&(a.context_bak.lineTo(o.clientX-a.canvasLeft,o.clientY-a.canvasTop),a.context_bak.stroke());else if("circle"==e)if(a.clearContext(),a.canDraw){a.context_bak.beginPath();var s=Math.sqrt((t-i)*(t-i)+(n-c)*(n-c));a.context_bak.arc(t,n,s,0,2*Math.PI,!1),a.context_bak.stroke()}else a.context_bak.beginPath(),a.context_bak.arc(i,c,20,0,2*Math.PI,!1),a.context_bak.stroke();else"handwriting"==e?a.canDraw?(a.context_bak.beginPath(),a.context_bak.strokeStyle=a.color.hex,a.context_bak.fillStyle=a.color.hex,a.context_bak.arc(i,c,10*a.penSize,0,2*Math.PI,!1),a.context_bak.fill(),a.context_bak.stroke()):(a.clearContext(),a.context_bak.beginPath(),a.context_bak.fillStyle=a.color.hex,a.context_bak.arc(i,c,10*a.penSize,0,2*Math.PI,!1),a.context_bak.fill(),a.context_bak.stroke()):"rubber"==e&&(a.context_bak.setLineDash([0,0]),a.context_bak.lineWidth=1,a.clearContext(),a.context_bak.beginPath(),a.context_bak.strokeStyle="#000000",a.context_bak.moveTo(i-10*a.penSize,c-10*a.penSize),a.context_bak.lineTo(i+10*a.penSize,c-10*a.penSize),a.context_bak.lineTo(i+10*a.penSize,c+10*a.penSize),a.context_bak.lineTo(i-10*a.penSize,c+10*a.penSize),a.context_bak.lineTo(i-10*a.penSize,c-10*a.penSize),a.context_bak.stroke(),a.canDraw&&a.context.clearRect(i-10*a.penSize,c-10*a.penSize,20*a.penSize,20*a.penSize),a.context_bak.setLineDash(a.lineType))},s=function(){"handwriting"!=e&&a.clearContext()};this.canvas_bak.onmousedown=function(){return o()},this.canvas_bak.onmousemove=function(){return c()},this.canvas_bak.onmouseup=function(){return i()},this.canvas_bak.onmouseout=function(){return s()}},clearContext:function(e){e?(this.context.clearRect(0,0,this.canvasSize.width,this.canvasSize.height),this.context_bak.clearRect(0,0,this.canvasSize.width,this.canvasSize.height)):this.context_bak.clearRect(0,0,this.canvasSize.width,this.canvasSize.height)},downloadImage:function(){this.$refs.download.href=this.canvas.toDataURL(),this.$refs.download.click()},cancel:function(){var e=this;this.cancelIndex++,this.context.clearRect(0,0,this.canvasSize.width,this.canvasSize.height);var t=new Image,n=this.cancelList.length-1-this.cancelIndex,a=this.cancelList[n];t.src=a,t.onload=function(){e.context.drawImage(t,0,0,t.width,t.height,0,0,e.canvasSize.width,e.canvasSize.height)}},next:function(){var e=this;this.cancelIndex--,this.context.clearRect(0,0,this.canvasSize.width,this.canvasSize.height);var t=new Image,n=this.cancelList.length-1-this.cancelIndex,a=this.cancelList[n];t.src=a,t.onload=function(){e.context.drawImage(t,0,0,t.width,t.height,0,0,e.canvasSize.width,e.canvasSize.height)}},saveImageToAry:function(){this.cancelIndex=0;var e=this.canvas.toDataURL();this.cancelList.push(e)},handleDragOver:function(e){e.stopPropagation(),e.preventDefault()},isImage:function(e){switch(e){case"image/jpeg":case"image/png":case"image/gif":case"image/bmp":case"image/jpg":return!0;default:return!1}},handleFileSelect:function(e){var t=this;e.stopPropagation(),e.preventDefault();for(var n,a=e.dataTransfer.files,o=0;n=a[o];o++){var i=n.type?n.type:"n/a",c=new FileReader,s=this.isImage(i);s&&(c.onload=function(){return function(e){var n=new Image;n.src=e.target.result,n.onload=function(){t.context.drawImage(n,0,0,n.width,n.height,0,0,t.canvasSize.width,t.canvasSize.height)}}}(),c.readAsDataURL(n))}},initDrag:function(){var e=document.getElementById("canvas_bak");e.addEventListener("dragover",this.handleDragOver,!1),e.addEventListener("drop",this.handleFileSelect,!1)},addkeyBoardlistener:function(){var e=this,t=arguments;document.onkeydown=function(n){var a=n||window.event||t.callee.caller.arguments[0];89===a.keyCode&&a.ctrlKey&&e.next(),90===a.keyCode&&a.ctrlKey&&e.cancel()}}},components:{PhotoshopPicker:r["Photoshop"]},mounted:function(){var e=this;this.initCanvas(),this.initDrag(),this.addkeyBoardlistener(),this.drawType(this.tools[0]),this.canvas_bak.addEventListener("click",this.falseColor),window.addEventListener("resize",function(){e.canvasSize={width:window.screen.availWidth-320,height:.75*window.screen.availHeight}})}},h=l,u=(n("b788"),n("2877")),d=Object(u["a"])(h,c,s,!1,null,"11ddf514",null);d.options.__file="draw.vue";var v=d.exports,f={name:"app",components:{Draw:v}},p=f,b=Object(u["a"])(p,o,i,!1,null,null,null);b.options.__file="App.vue";var x=b.exports,g=n("66e0"),k=n.n(g);n("d6f6"),n("be3a");a["default"].config.productionTip=!1,a["default"].use(k.a),new a["default"]({render:function(e){return e(x)}}).$mount("#app")},b788:function(e,t,n){"use strict";var a=n("dfb8"),o=n.n(a);o.a},dfb8:function(e,t,n){}});
//# sourceMappingURL=app.3985e273.js.map