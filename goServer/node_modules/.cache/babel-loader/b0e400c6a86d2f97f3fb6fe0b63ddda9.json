{"remainingRequest":"/home/wushili/Desktop/myStudy/WaifuFromSketch/goServer/node_modules/babel-loader/lib/index.js!/home/wushili/Desktop/myStudy/WaifuFromSketch/goServer/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/wushili/Desktop/myStudy/WaifuFromSketch/goServer/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/wushili/Desktop/myStudy/WaifuFromSketch/goServer/src/components/draw.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/wushili/Desktop/myStudy/WaifuFromSketch/goServer/src/components/draw.vue","mtime":1575862883643},{"path":"/home/wushili/Desktop/myStudy/WaifuFromSketch/goServer/node_modules/cache-loader/dist/cjs.js","mtime":1572924774051},{"path":"/home/wushili/Desktop/myStudy/WaifuFromSketch/goServer/node_modules/babel-loader/lib/index.js","mtime":1572924773995},{"path":"/home/wushili/Desktop/myStudy/WaifuFromSketch/goServer/node_modules/cache-loader/dist/cjs.js","mtime":1572924774051},{"path":"/home/wushili/Desktop/myStudy/WaifuFromSketch/goServer/node_modules/vue-loader/lib/index.js","mtime":1572924775515}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Photoshop } from 'vue-color'; // import { uploadPict } from '@/api/api'\n\nimport axios from 'axios';\nexport default {\n  name: 'draw',\n  data: function data() {\n    return {\n      canvasSize: {\n        // width: window.screen.availWidth - 320,\n        // height: window.screen.availHeight * 0.75\n        width: 600,\n        height: 600\n      },\n      canvas: this.$refs.canvas,\n      canvasTop: 67,\n      canvasLeft: 300,\n      context: null,\n      canvas_bak: this.$refs.canvas_bak,\n      context_bak: null,\n      ischoosecolor: false,\n      toolsToggle: false,\n      chooseColorBtn: 'choose color',\n      color: {\n        hex: '#2196f3',\n        hsl: {\n          h: 205,\n          s: 86,\n          l: 0,\n          a: 1\n        },\n        hsv: {\n          h: 205,\n          s: 86,\n          v: 92,\n          a: 1\n        },\n        rgba: {\n          r: 33,\n          g: 150,\n          b: 243,\n          a: 1\n        },\n        a: 1\n      },\n      penSize: 1,\n      lineType: [0, 0],\n      canDraw: false,\n      curcursor: 'auto',\n      cancelList: [],\n      cancelIndex: 0,\n      tools: [{\n        name: 'pencil',\n        icon: 'mode_edit',\n        fun: 'pencil',\n        ischoose: false\n      }, {\n        name: 'straight line',\n        icon: 'remove',\n        fun: 'line',\n        ischoose: false\n      }, {\n        name: 'circle',\n        icon: 'panorama_fish_eye',\n        fun: 'circle',\n        ischoose: false\n      }, {\n        name: 'rectangle',\n        icon: 'crop_square',\n        fun: 'square',\n        ischoose: false\n      }, {\n        name: 'brush',\n        icon: 'brush',\n        fun: 'handwriting',\n        ischoose: false\n      }, {\n        name: 'eraser',\n        icon: 'border_style',\n        fun: 'rubber',\n        ischoose: false\n      }],\n      tabs: [{\n        name: 'clear',\n        icon: 'clear',\n        fun: 'clear'\n      }, {\n        name: 'upload',\n        icon: 'system_update_alt',\n        fun: 'save'\n      }]\n    };\n  },\n  methods: {\n    initCanvas: function initCanvas() {\n      this.canvas = document.getElementById(\"canvas\");\n      this.canvas.width = this.canvasSize.width;\n      this.canvas.height = this.canvasSize.height;\n      this.context = this.canvas.getContext('2d');\n      this.canvas_bak = document.getElementById(\"canvas_bak\");\n      this.canvas_bak.width = this.canvasSize.width;\n      this.canvas_bak.height = this.canvasSize.height;\n      this.context_bak = this.canvas_bak.getContext('2d');\n    },\n    setColor: function setColor() {\n      this.chooseColorBtn = this.ischoosecolor ? '选择颜色' : '确认选择';\n      this.ischoosecolor = this.ischoosecolor ? false : true;\n    },\n    falseColor: function falseColor() {\n      this.ischoosecolor = false;\n    },\n    drawType: function drawType(pen) {\n      switch (pen.fun) {\n        case 'pencil':\n          this.curcursor = \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAZ0lEQVR4AdXOrQ2AMBRF4bMc/zOUOSrYoYI5cQQwpAieQDW3qQBO7Xebxx8bWAk5/CASmRHzRHtB+d0Bkw0W5ZiT0SYbFcl6u/2eeJHbxIHOhWO6Er6/y9syXpMul5PLefAGKZ1/rwtTimwbWLpiCgAAAABJRU5ErkJggg==') 3 24,  auto\";\n          break;\n\n        case 'rubber':\n          this.curcursor = 'pointer';\n          break;\n\n        case 'circle':\n        case 'square':\n        case 'line':\n        case 'handwriting':\n          this.curcursor = 'crosshair';\n          break;\n\n        default:\n          this.curcursor = 'auto';\n          break;\n      }\n\n      this.draw_graph(pen.fun);\n      this.chooseImg(pen);\n    },\n    //选择功能按钮 修改样式\n    chooseImg: function chooseImg(obj) {\n      for (var i = 0; i < this.tools.length; i++) {\n        this.tools[i].ischoose = false;\n      }\n\n      obj.ischoose = true;\n    },\n    tabfun: function tabfun(fun) {\n      if (fun === 'clear') {\n        this.clearContext('1');\n      } else if (fun === 'save') {\n        this.downloadImage();\n      }\n    },\n    draw_graph: function draw_graph(graphType) {\n      var _this = this;\n\n      this.canvas_bak.style.zIndex = 1; //先画在蒙版上 再复制到画布上       \n\n      this.canDraw = false;\n      var startX, startY; //鼠标按下获取 开始xy开始画图\n\n      var mousedown = function mousedown(e) {\n        _this.context.strokeStyle = _this.color.hex;\n        _this.context_bak.strokeStyle = _this.color.hex;\n        _this.context_bak.lineWidth = _this.penSize;\n        e = e || window.event;\n        startX = e.clientX - _this.canvasLeft;\n        startY = e.clientY - _this.canvasTop;\n\n        _this.context_bak.moveTo(startX, startY);\n\n        _this.canDraw = true;\n\n        if (graphType == 'pencil') {\n          _this.context_bak.beginPath();\n        } else if (graphType == 'circle') {\n          _this.context.beginPath();\n\n          _this.context.moveTo(startX, startY);\n\n          _this.context.lineTo(startX + 2, startY + 2);\n\n          _this.context.stroke();\n        } else if (graphType == 'rubber') {\n          _this.context.clearRect(startX - _this.penSize * 10, startY - _this.penSize * 10, _this.penSize * 20, _this.penSize * 20);\n        }\n      }; //鼠标离开 把蒙版canvas的图片生成到canvas中\n\n\n      var mouseup = function mouseup(e) {\n        e = e || window.event;\n        _this.canDraw = false;\n        var image = new Image();\n\n        if (graphType != 'rubber') {\n          image.src = _this.canvas_bak.toDataURL();\n\n          image.onload = function () {\n            _this.context.drawImage(image, 0, 0, image.width, image.height, 0, 0, _this.canvasSize.width, _this.canvasSize.height);\n\n            _this.clearContext();\n\n            _this.saveImageToAry();\n          };\n\n          var x = e.clientX - _this.canvasLeft;\n          var y = e.clientY - _this.canvasTop;\n\n          _this.context.beginPath();\n\n          _this.context.moveTo(x, y);\n\n          _this.context.lineTo(x + 2, y + 2);\n\n          _this.context.stroke();\n        }\n      }; // 鼠标移动\n\n\n      var mousemove = function mousemove(e) {\n        e = e || window.event;\n        var x = e.clientX - _this.canvasLeft;\n        var y = e.clientY - _this.canvasTop;\n\n        _this.context_bak.setLineDash(_this.lineType); //方块  即4条直线\n\n\n        if (graphType == 'square') {\n          if (_this.canDraw) {\n            _this.context_bak.beginPath();\n\n            _this.clearContext();\n\n            _this.context_bak.moveTo(startX, startY);\n\n            _this.context_bak.lineTo(x, startY);\n\n            _this.context_bak.lineTo(x, y);\n\n            _this.context_bak.lineTo(startX, y);\n\n            _this.context_bak.lineTo(startX, startY);\n\n            _this.context_bak.stroke();\n          } //直线\n\n        } else if (graphType == 'line') {\n          if (_this.canDraw) {\n            _this.context_bak.beginPath();\n\n            _this.clearContext();\n\n            _this.context_bak.moveTo(startX, startY);\n\n            _this.context_bak.lineTo(x, y);\n\n            _this.context_bak.stroke();\n          } //画笔\n\n        } else if (graphType == 'pencil') {\n          if (_this.canDraw) {\n            _this.context_bak.lineTo(e.clientX - _this.canvasLeft, e.clientY - _this.canvasTop);\n\n            _this.context_bak.stroke();\n          } //圆 未画得时候 出现一个小圆\n\n        } else if (graphType == 'circle') {\n          _this.clearContext();\n\n          if (_this.canDraw) {\n            _this.context_bak.beginPath();\n\n            var radii = Math.sqrt((startX - x) * (startX - x) + (startY - y) * (startY - y));\n\n            _this.context_bak.arc(startX, startY, radii, 0, Math.PI * 2, false);\n\n            _this.context_bak.stroke();\n          } else {\n            _this.context_bak.beginPath();\n\n            _this.context_bak.arc(x, y, 20, 0, Math.PI * 2, false);\n\n            _this.context_bak.stroke();\n          } //涂鸦 未画得时候 出现一个小圆\n\n        } else if (graphType == 'handwriting') {\n          if (_this.canDraw) {\n            _this.context_bak.beginPath();\n\n            _this.context_bak.strokeStyle = _this.color.hex;\n            _this.context_bak.fillStyle = _this.color.hex;\n\n            _this.context_bak.arc(x, y, _this.penSize * 10, 0, Math.PI * 2, false);\n\n            _this.context_bak.fill();\n\n            _this.context_bak.stroke();\n          } else {\n            _this.clearContext();\n\n            _this.context_bak.beginPath();\n\n            _this.context_bak.fillStyle = _this.color.hex;\n\n            _this.context_bak.arc(x, y, _this.penSize * 10, 0, Math.PI * 2, false);\n\n            _this.context_bak.fill();\n\n            _this.context_bak.stroke();\n          } //橡皮擦 不管有没有在画都出现小方块 按下鼠标 开始清空区域\n\n        } else if (graphType == 'rubber') {\n          _this.context_bak.setLineDash([0, 0]);\n\n          _this.context_bak.lineWidth = 1;\n\n          _this.clearContext();\n\n          _this.context_bak.beginPath();\n\n          _this.context_bak.strokeStyle = '#000000';\n\n          _this.context_bak.moveTo(x - _this.penSize * 10, y - _this.penSize * 10);\n\n          _this.context_bak.lineTo(x + _this.penSize * 10, y - _this.penSize * 10);\n\n          _this.context_bak.lineTo(x + _this.penSize * 10, y + _this.penSize * 10);\n\n          _this.context_bak.lineTo(x - _this.penSize * 10, y + _this.penSize * 10);\n\n          _this.context_bak.lineTo(x - _this.penSize * 10, y - _this.penSize * 10);\n\n          _this.context_bak.stroke();\n\n          if (_this.canDraw) {\n            _this.context.clearRect(x - _this.penSize * 10, y - _this.penSize * 10, _this.penSize * 20, _this.penSize * 20);\n          }\n\n          _this.context_bak.setLineDash(_this.lineType);\n        }\n      }; //鼠标离开区域以外 除了涂鸦 都清空\n\n\n      var mouseout = function mouseout() {\n        if (graphType != 'handwriting') {\n          _this.clearContext();\n        }\n      };\n\n      this.canvas_bak.onmousedown = function () {\n        return mousedown();\n      };\n\n      this.canvas_bak.onmousemove = function () {\n        return mousemove();\n      };\n\n      this.canvas_bak.onmouseup = function () {\n        return mouseup();\n      };\n\n      this.canvas_bak.onmouseout = function () {\n        return mouseout();\n      };\n    },\n    clearContext: function clearContext(type) {\n      if (!type) {\n        this.context_bak.clearRect(0, 0, this.canvasSize.width, this.canvasSize.height);\n      } else {\n        this.context.clearRect(0, 0, this.canvasSize.width, this.canvasSize.height);\n        this.context_bak.clearRect(0, 0, this.canvasSize.width, this.canvasSize.height);\n      }\n    },\n    downloadImage: function downloadImage() {\n      this.$refs.download.href = this.canvas.toDataURL();\n      var bodyFormData = new FormData();\n      bodyFormData.append('pictData', this.canvas.toDataURL());\n      axios({\n        method: 'post',\n        url: 'http://drawstickserver.ngrok.io/v1/pict',\n        data: bodyFormData,\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(function () {\n        alert(\"success!!\");\n        window.location.href = 'http://drawstickserver.ngrok.io/result.html'; // window.open()\n      }).catch(function (response) {\n        alert(response);\n      });\n    },\n    cancel: function cancel() {\n      var _this2 = this;\n\n      this.cancelIndex++;\n      this.context.clearRect(0, 0, this.canvasSize.width, this.canvasSize.height);\n      var image = new Image();\n      var index = this.cancelList.length - 1 - this.cancelIndex;\n      var url = this.cancelList[index];\n      image.src = url;\n\n      image.onload = function () {\n        _this2.context.drawImage(image, 0, 0, image.width, image.height, 0, 0, _this2.canvasSize.width, _this2.canvasSize.height);\n      };\n    },\n    next: function next() {\n      var _this3 = this;\n\n      this.cancelIndex--;\n      this.context.clearRect(0, 0, this.canvasSize.width, this.canvasSize.height);\n      var image = new Image();\n      var index = this.cancelList.length - 1 - this.cancelIndex;\n      var url = this.cancelList[index];\n      image.src = url;\n\n      image.onload = function () {\n        _this3.context.drawImage(image, 0, 0, image.width, image.height, 0, 0, _this3.canvasSize.width, _this3.canvasSize.height);\n      };\n    },\n    //保存历史 用于撤销\n    saveImageToAry: function saveImageToAry() {\n      this.cancelIndex = 0;\n      var dataUrl = this.canvas.toDataURL();\n      this.cancelList.push(dataUrl);\n    },\n    // 处理文件拖入事件，防止浏览器默认事件带来的重定向  \n    handleDragOver: function handleDragOver(evt) {\n      evt.stopPropagation();\n      evt.preventDefault();\n    },\n    isImage: function isImage(type) {\n      switch (type) {\n        case 'image/jpeg':\n        case 'image/png':\n        case 'image/gif':\n        case 'image/bmp':\n        case 'image/jpg':\n          return true;\n\n        default:\n          return false;\n      }\n    },\n    // 处理拖放文件列表  \n    handleFileSelect: function handleFileSelect(evt) {\n      var _this4 = this;\n\n      evt.stopPropagation();\n      evt.preventDefault();\n      var files = evt.dataTransfer.files;\n\n      for (var i = 0, f; f = files[i]; i++) {\n        var t = f.type ? f.type : 'n/a';\n        var reader = new FileReader();\n        var isImg = this.isImage(t); // 处理得到的图片\n\n        if (isImg) {\n          reader.onload = function () {\n            return function (e) {\n              var image = new Image();\n              image.src = e.target.result;\n\n              image.onload = function () {\n                _this4.context.drawImage(image, 0, 0, image.width, image.height, 0, 0, _this4.canvasSize.width, _this4.canvasSize.height);\n              };\n            };\n          }(f);\n\n          reader.readAsDataURL(f);\n        }\n      }\n    },\n    //初始化拖入效果\n    initDrag: function initDrag() {\n      var dragDiv = document.getElementById(\"canvas_bak\");\n      dragDiv.addEventListener('dragover', this.handleDragOver, false);\n      dragDiv.addEventListener('drop', this.handleFileSelect, false);\n    },\n    addkeyBoardlistener: function addkeyBoardlistener() {\n      var _this5 = this,\n          _arguments = arguments;\n\n      document.onkeydown = function (event) {\n        var e = event || window.event || _arguments.callee.caller.arguments[0];\n\n        if (e.keyCode === 89 && e.ctrlKey) {\n          //ctrl+Y\n          _this5.next();\n        }\n\n        if (e.keyCode === 90 && e.ctrlKey) {\n          // ctrl+Z\n          _this5.cancel();\n        }\n      };\n    }\n  },\n  components: {\n    'PhotoshopPicker': Photoshop\n  },\n  mounted: function mounted() {\n    var _this6 = this;\n\n    this.initCanvas();\n    this.initDrag();\n    this.addkeyBoardlistener();\n    this.drawType(this.tools[0]);\n    this.canvas_bak.addEventListener('click', this.falseColor);\n    window.addEventListener('resize', function () {\n      _this6.canvasSize = {\n        width: window.screen.availWidth - 320,\n        height: window.screen.availHeight * 0.75\n      };\n    });\n  }\n};",{"version":3,"sources":["draw.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"layout\">\n    <div class=\"header\">      \n      <div class=\"logo\">\n        <span>Action Sketch Generator</span>\n        </div>\n      <div class=\"nav\">\n        <mu-flat-button v-for=\"tab in tabs\" :key=\"tab.name\" :label=\"tab.name\" class=\"tab demo-flat-button\" :icon=\"tab.icon\" @click=\"tabfun(tab.fun)\"  primary backgroundColor=\"#FFFFFF\"/>\n        <mu-flat-button :label=\"chooseColorBtn\" class=\"tab demo-flat-button\" icon=\"color_lens\" @click=\"setColor()\"  primary backgroundColor=\"#FFFFFF\" :color=\"color.hex\"/>\n        <a href=\"javascript:void(0);\" ref=\"download\" download=\"picture.png\" v-show=\"false\"></a>        \n      </div>\n      <PhotoshopPicker v-model=\"color\" v-if=\"ischoosecolor\" style=\"position:absolute;z-index:10;top:56px;\" @ok=\"setColor()\" @cancel=\"falseColor()\"/>\n    </div>\n    <div class=\"content\">\n      <div class=\"content-left\">\n        <div class=\"setterSize\">\n          <span>line width:{{penSize}}</span>\n          <mu-slider v-model=\"penSize\" :step=\"1\" :max=\"30\"/>\n          <span>Dash Length:{{lineType[0]}}</span>\n          <mu-slider v-model=\"lineType[0]\" :step=\"1\" :max=\"100\"/>\n          <span>Dash Space:{{lineType[1]}}</span>\n          <mu-slider v-model=\"lineType[1]\" :step=\"1\" :max=\"100\"/> \n        </div>\n        <mu-paper>\n          <mu-menu v-for=\"tool in tools\" :key=\"tool.name\">\n            <mu-menu-item :title=\"tool.name\" :leftIcon=\"tool.icon\" @click=\"drawType(tool)\" :class=\"{'selected':tool.ischoose}\"/>\n          </mu-menu>\n        </mu-paper>        \n      </div>\n      <!--<div class=\"content-right\">-->\n      <div style=\"width: 600px; height: 600px; padding: 10px 20px; background-color: rgba(0, 0, 0, 0)\">\n        <div class=\"body\" :style=\"{width:canvasSize.width + 'px',height: canvasSize.height + 'px' }\">\n            <canvas id=\"canvas\" ref=\"canvas\" :style=\"{cursor:curcursor}\"></canvas>\n            <canvas id=\"canvas_bak\" ref=\"canvas_bak\" :style=\"{cursor:curcursor}\"></canvas>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Photoshop } from 'vue-color'\n// import { uploadPict } from '@/api/api'\nimport axios from 'axios'\n\nexport default {\n  name: 'draw',\n  data () {\n    return {\n      canvasSize: {\n        // width: window.screen.availWidth - 320,\n        // height: window.screen.availHeight * 0.75\n        width: 600,\n        height: 600\n      },\n      canvas: this.$refs.canvas,\n      canvasTop: 67,\n      canvasLeft: 300,\n      context: null,\n      canvas_bak: this.$refs.canvas_bak,\n      context_bak: null,\n      ischoosecolor: false,\n      toolsToggle: false,\n      chooseColorBtn: 'choose color',\n      color: {\n        hex: '#2196f3',\n        hsl: {\n          h: 205,\n          s: 86,\n          l: 0,\n          a: 1\n        },\n        hsv: {\n          h: 205,\n          s: 86,\n          v: 92,\n          a: 1\n        },\n        rgba: {\n          r: 33,\n          g: 150,\n          b: 243,\n          a: 1\n        },\n        a: 1\n      },      \n      penSize: 1,      \n      lineType: [0, 0],\n      canDraw: false,\n      curcursor: 'auto',\n      cancelList: [],\n      cancelIndex: 0,\n      tools: [{\n          name: 'pencil',\n          icon: 'mode_edit',\n          fun: 'pencil',\n          ischoose: false,\n        }, {\n          name: 'straight line',\n          icon: 'remove',\n          fun: 'line',\n          ischoose: false\n        }, {\n          name: 'circle',\n          icon: 'panorama_fish_eye',\n          fun: 'circle',\n          ischoose: false\n        }, {\n          name: 'rectangle',\n          icon: 'crop_square',\n          fun: 'square',\n          ischoose: false\n        }, {\n          name: 'brush',\n          icon: 'brush',\n          fun: 'handwriting',\n          ischoose: false\n        }, {\n          name: 'eraser',\n          icon: 'border_style',\n          fun: 'rubber',\n          ischoose: false\n        }],\n      tabs: [{\n          name: 'clear',\n          icon: 'clear',\n          fun: 'clear'\n        }, {\n          name: 'upload',\n          icon: 'system_update_alt',\n          fun: 'save'\n        }]\n    }\n  },\n  methods: {\n    initCanvas () {\n      this.canvas =  document.getElementById(\"canvas\")\n      this.canvas.width = this.canvasSize.width\n      this.canvas.height = this.canvasSize.height\n      this.context = this.canvas.getContext('2d')\n      this.canvas_bak =  document.getElementById(\"canvas_bak\")\n      this.canvas_bak.width = this.canvasSize.width\n      this.canvas_bak.height = this.canvasSize.height\n      this.context_bak = this.canvas_bak.getContext('2d')\n    },\n    setColor () {\n      this.chooseColorBtn = this.ischoosecolor ? '选择颜色':'确认选择'\n      this.ischoosecolor = this.ischoosecolor ? false : true\n    },\n    falseColor() {\n      this.ischoosecolor = false\n    },\n    drawType (pen) {\n      switch (pen.fun) {\n        case 'pencil':\n            this.curcursor = \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAZ0lEQVR4AdXOrQ2AMBRF4bMc/zOUOSrYoYI5cQQwpAieQDW3qQBO7Xebxx8bWAk5/CASmRHzRHtB+d0Bkw0W5ZiT0SYbFcl6u/2eeJHbxIHOhWO6Er6/y9syXpMul5PLefAGKZ1/rwtTimwbWLpiCgAAAABJRU5ErkJggg==') 3 24,  auto\"\n            break\n        case 'rubber':\n        this.curcursor = 'pointer'\n        break\n        case 'circle':\n        case 'square':\n        case 'line':\n        case 'handwriting':\n        this.curcursor = 'crosshair'\n        break          \n        default:\n        this.curcursor = 'auto'\n          break;\n      }  \n      this.draw_graph(pen.fun)\n      this.chooseImg(pen)\n    },\n    //选择功能按钮 修改样式\n    chooseImg(obj){\n        for (let i = 0; i < this.tools.length; i++) {\n          this.tools[i].ischoose = false\n        }\n        obj.ischoose = true        \n    },\n    tabfun(fun) {\n      if(fun === 'clear' ){\n        this.clearContext('1')\n      }else if(fun === 'save' ){\n        this.downloadImage()\n      }\n    },\n    draw_graph (graphType) {    \n        this.canvas_bak.style.zIndex = 1\n        //先画在蒙版上 再复制到画布上       \n        this.canDraw = false      \n        let startX,startY\n      //鼠标按下获取 开始xy开始画图\n        let mousedown = (e) => {\n          this.context.strokeStyle = this.color.hex\n          this.context_bak.strokeStyle = this.color.hex\n          this.context_bak.lineWidth = this.penSize\n          e=e||window.event\n          startX = e.clientX - this.canvasLeft\n          startY = e.clientY - this.canvasTop\n          this.context_bak.moveTo(startX, startY)\n          this.canDraw = true\n        if(graphType == 'pencil'){\n          this.context_bak.beginPath()\n        }else if(graphType == 'circle'){\n          this.context.beginPath()\n          this.context.moveTo(startX, startY)\n          this.context.lineTo(startX + 2, startY + 2)\n          this.context.stroke()\n        }else if(graphType == 'rubber'){\n          this.context.clearRect(startX - this.penSize * 10, startY - this.penSize * 10, this.penSize * 20, this.penSize * 20)\n        }\n      }\n      //鼠标离开 把蒙版canvas的图片生成到canvas中\n      let mouseup = (e) => {\n        e=e||window.event\n        this.canDraw = false\n        let image = new Image()\n        if (graphType!='rubber') {          \n          image.src = this.canvas_bak.toDataURL()\n          image.onload = () => {\n            this.context.drawImage(image, 0, 0, image.width, image.height, 0, 0, this.canvasSize.width, this.canvasSize.height)\n            this.clearContext()\n            this.saveImageToAry()\n          }\n          let x = e.clientX - this.canvasLeft\n          let y = e.clientY - this.canvasTop\n          this.context.beginPath()\n          this.context.moveTo(x, y)\n          this.context.lineTo(x + 2, y + 2)\n          this.context.stroke()\n        }\n      }\n      // 鼠标移动\n      let mousemove = (e) => {\n        e=e||window.event\n        let x = e.clientX - this.canvasLeft\n        let y = e.clientY - this.canvasTop\n        this.context_bak.setLineDash(this.lineType)\n        //方块  即4条直线\n        if (graphType == 'square') {\n          if (this.canDraw) {\n            this.context_bak.beginPath()\n            this.clearContext()\n            this.context_bak.moveTo(startX, startY)\n            this.context_bak.lineTo(x, startY)\n            this.context_bak.lineTo(x, y)\n            this.context_bak.lineTo(startX, y)\n            this.context_bak.lineTo(startX, startY)\n            this.context_bak.stroke()\n          }\n        //直线\n        } else if (graphType =='line' ){\n          if (this.canDraw) {\n            this.context_bak.beginPath()\n            this.clearContext()\n            this.context_bak.moveTo(startX, startY)\n            this.context_bak.lineTo(x, y)\n            this.context_bak.stroke()\n          }\n        //画笔\n        } else if (graphType == 'pencil') {\n          if (this.canDraw) {\n            this.context_bak.lineTo(e.clientX   - this.canvasLeft ,e.clientY  - this.canvasTop)\n            this.context_bak.stroke()\n          }\n        //圆 未画得时候 出现一个小圆\n        } else if (graphType == 'circle') {\n          this.clearContext()\n          if (this.canDraw) {           \n            this.context_bak.beginPath()\n            let radii = Math.sqrt((startX - x) * (startX - x)  + (startY - y) * (startY - y))\n            this.context_bak.arc(startX,startY,radii,0,Math.PI * 2,false)\n            this.context_bak.stroke()\n          } else {\n            this.context_bak.beginPath()\n            this.context_bak.arc(x, y, 20, 0, Math.PI * 2, false)\n            this.context_bak.stroke()\n          }\n        //涂鸦 未画得时候 出现一个小圆\n        } else if (graphType == 'handwriting') {\n          if (this.canDraw) {\n            this.context_bak.beginPath()\n            this.context_bak.strokeStyle = this.color.hex\n            this.context_bak.fillStyle  = this.color.hex\n            this.context_bak.arc(x, y, this.penSize*10 ,0, Math.PI * 2, false)\n            this.context_bak.fill()\n            this.context_bak.stroke()\n          } else {\n            this.clearContext()\n            this.context_bak.beginPath()\n            this.context_bak.fillStyle = this.color.hex\n            this.context_bak.arc(x, y, this.penSize*10, 0, Math.PI * 2,false)\n            this.context_bak.fill()\n            this.context_bak.stroke()\n          }\n        //橡皮擦 不管有没有在画都出现小方块 按下鼠标 开始清空区域\n        } else if (graphType == 'rubber'){\n          this.context_bak.setLineDash([0, 0])          \n          this.context_bak.lineWidth = 1\n          this.clearContext()\n          this.context_bak.beginPath()\n          this.context_bak.strokeStyle = '#000000'\n          this.context_bak.moveTo(x - this.penSize * 10,  y - this.penSize * 10 )\n          this.context_bak.lineTo(x + this.penSize * 10, y - this.penSize * 10 )\n          this.context_bak.lineTo(x + this.penSize * 10, y + this.penSize * 10 )\n          this.context_bak.lineTo(x - this.penSize * 10, y + this.penSize * 10 )\n          this.context_bak.lineTo(x - this.penSize * 10, y - this.penSize * 10 )\n          this.context_bak.stroke()\n          if (this.canDraw) {\n            this.context.clearRect(x - this.penSize * 10,  y - this.penSize * 10, this.penSize * 20, this.penSize * 20)\n          }\n          this.context_bak.setLineDash(this.lineType)\n        }\n      }\n      //鼠标离开区域以外 除了涂鸦 都清空\n      let mouseout = () => {\n        if (graphType != 'handwriting') {\n          this.clearContext()\n        }\n      }\n      this.canvas_bak.onmousedown = () => mousedown()\n      this.canvas_bak.onmousemove = () => mousemove()\n      this.canvas_bak.onmouseup = () => mouseup()\n      this.canvas_bak.onmouseout = () => mouseout()\n\n    },\n    clearContext (type) {\n      if (!type) {\n        this.context_bak.clearRect(0, 0, this.canvasSize.width, this.canvasSize.height)\n      } else {\n        this.context.clearRect(0, 0, this.canvasSize.width, this.canvasSize.height)\n        this.context_bak.clearRect(0, 0, this.canvasSize.width, this.canvasSize.height)\n      }\n    },\n    downloadImage () {\n      this.$refs.download.href = this.canvas.toDataURL()\n      var bodyFormData = new FormData()\n      bodyFormData.append('pictData', this.canvas.toDataURL())\n      axios({\n        method: 'post',\n        url: 'http://drawstickserver.ngrok.io/v1/pict',\n        data: bodyFormData,\n        headers: {'Content-Type': 'multipart/form-data' }\n      })\n      .then(function () {\n        alert(\"success!!\")\n        window.location.href = 'http://drawstickserver.ngrok.io/result.html'\n        // window.open()\n      })\n      .catch(function (response) {\n        alert(response)\n      })\n    },\n    cancel () {\n      this.cancelIndex++\n      this.context.clearRect(0, 0, this.canvasSize.width, this.canvasSize.height)\n      let image = new Image()\n      let index = this.cancelList.length-1 - this.cancelIndex\n      let url = this.cancelList[index]\n      image.src = url\n      image.onload = ()=> {\n        this.context.drawImage(image , 0, 0, image.width, image.height, 0, 0, this.canvasSize.width, this.canvasSize.height)\n      }\n    },\n    next () {\n      this.cancelIndex--\n      this.context.clearRect(0, 0, this.canvasSize.width, this.canvasSize.height)\n      let image = new Image()\n      let index = this.cancelList.length-1 - this.cancelIndex\n      let url = this.cancelList[index]\n      image.src = url\n      image.onload = () => {\n        this.context.drawImage(image, 0, 0, image.width, image.height, 0, 0, this.canvasSize.width, this.canvasSize.height)\n      }\n    },\n    //保存历史 用于撤销\n    saveImageToAry () {\n      this.cancelIndex = 0\n      let dataUrl =  this.canvas.toDataURL()\n      this.cancelList.push(dataUrl)   \n    },\n    // 处理文件拖入事件，防止浏览器默认事件带来的重定向  \n    handleDragOver (evt) {  \n      evt.stopPropagation()\n      evt.preventDefault()\n    },\n    isImage (type) {  \n      switch (type) {        \n      case 'image/jpeg':\n      case 'image/png':\n      case 'image/gif':\n      case 'image/bmp':\n      case 'image/jpg':\n        return true\n      default:\n        return false\n      }  \n    },\n    // 处理拖放文件列表  \n    handleFileSelect (evt) {\n      evt.stopPropagation()\n      evt.preventDefault()\n      let files = evt.dataTransfer.files\n      for (let i = 0, f; (f = files[i]); i++) {\n        let t = f.type ? f.type : 'n/a'\n        let reader = new FileReader()\n        let isImg = this.isImage(t)\n        // 处理得到的图片\n        if (isImg) {\n          reader.onload = (() =>  {\n            return (e) => {\n              let  image = new Image()\n              image.src =  e.target.result\n              image.onload = ()=> {\n                this.context.drawImage(image, 0, 0, image.width, image.height, 0, 0, this.canvasSize.width, this.canvasSize.height)\n              }\n            }\n          })(f)\n          reader.readAsDataURL(f)\n        }\n      }\n    },\n     //初始化拖入效果\n    initDrag () {\n      let dragDiv  = document.getElementById(\"canvas_bak\")\n      dragDiv.addEventListener('dragover', this.handleDragOver, false) \n      dragDiv.addEventListener('drop', this.handleFileSelect, false)\n    },\n    addkeyBoardlistener () {\n      document.onkeydown = (event) => {   \n        let e = event || window.event || arguments.callee.caller.arguments[0]\n        if (e.keyCode === 89 && e.ctrlKey) {\n          //ctrl+Y\n          this.next()\n        }\n        if (e.keyCode === 90 && e.ctrlKey) {\n          // ctrl+Z\n          this.cancel()\n        }\n      }\n    }\n  },\n  components: {\n    'PhotoshopPicker': Photoshop\n  },\n  mounted () {\n    this.initCanvas()\n    this.initDrag()\n    this.addkeyBoardlistener()\n    this.drawType(this.tools[0])\n    this.canvas_bak.addEventListener('click', this.falseColor)\n    window.addEventListener('resize', () => {\n      this.canvasSize = {\n        width: window.screen.availWidth - 320,\n        height: window.screen.availHeight * 0.75\n      }\n    })\n  }\n}\n</script>\n<style scoped>\n* {\n  -webkit-user-select: none;\n  -moz-user-select: none; \n  -ms-user-select: none; \n  user-select: none;\n}\n\ncanvas {\n  position: absolute;\n  z-index : 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  height:100%;  \n}\n\n.layout {\n  background-color: rgb(236, 236, 236);\n  height: 100%;\n}\n\n.header {\n  background-color: #696969;\n  position: relative;\n  display: flex;\n  flex-grow: 1;\n  align-items: center;\n}\n\n.logo {\n  display: flex;\n  flex-grow: 1;\n  align-items: center;\n  font-size: 24px;\n  color: white;\n  padding: 10px 20px;\n}\n\n.nav {\n  display: flex;\n  width: calc(100% - 400px);\n  margin: 0 auto;\n}\n\n.content {\n  overflow: hidden;\n  width: 100%;\n  height: calc(100vh - 56px);\n  display: flex;\n}\n\n.content-left {\n  width: 280px;\n  background-color: white;\n}\n\n.content-right {\n  width: calc(100% - 280px);\n  height: 100%;\n  padding: 10px 20px;\n  background-color: rgba(0, 0, 0, 0)\n}\n\n.body {\n  position: relative;\n  background-color: white;\n  border-radius: 5px;\n  height:100%;\n  margin: 0 auto;\n}\n\n.setterSize {\n  padding: 5%;\n  font-size: 0.5rem;\n}\n\n.selected {\n  background: rgba(0,0,0,0.35)!important;\n}\n\n.tab {\n  margin-right: 5px\n}\n</style>"],"sourceRoot":"src/components"}]}